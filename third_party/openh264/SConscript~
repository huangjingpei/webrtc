Import('*')

_env = env.Clone()
_env.Append(CPPFLAGS = ' ')

_env.Append(CPPPATH = ['#.', '#webrtc', './', 
    '#third_party/depends/libvpx', 
    '#third_party/depends/libyuv/include'
    '#webrtc/modules/video_coding/codecs/openh264/src/codec/api/svc',
    '#webrtc/modules/video_coding/codecs/openh264/src/codec/common/inc',
    '#webrtc/modules/video_coding/codecs/openh264/src/codec/common/src',
    '#webrtc/modules/video_coding/codecs/openh264/src/codec/processing/interface',
    '#webrtc/modules/video_coding/codecs/openh264/src/codec/processing/interface/',
    '#webrtc/modules/video_coding/codecs/openh264/src/codec/processing/src/adaptivequantization',
    '#webrtc/modules/video_coding/codecs/openh264/src/codec/processing/src/backgrounddetection',
    '#webrtc/modules/video_coding/codecs/openh264/src/codec/processing/src/common',
    '#webrtc/modules/video_coding/codecs/openh264/src/codec/processing/src/complexityanalysis',
    '#webrtc/modules/video_coding/codecs/openh264/src/codec/processing/src/denoise',
    '#webrtc/modules/video_coding/codecs/openh264/src/codec/processing/src/downsample',
    '#webrtc/modules/video_coding/codecs/openh264/src/codec/processing/src/imagerotate',
    '#webrtc/modules/video_coding/codecs/openh264/src/codec/processing/src/scenechangedetection',
    '#webrtc/modules/video_coding/codecs/openh264/src/codec/processing/src/scrolldetection',
    '#webrtc/modules/video_coding/codecs/openh264/src/codec/processing/src/vaacalc',
    '#webrtc/modules/video_coding/codecs/openh264/src/codec/api/svc',
    '#webrtc/modules/video_coding/codecs/openh264/src/codec/common/inc',
    '#webrtc/modules/video_coding/codecs/openh264/src/codec/common/src',
    '#webrtc/modules/video_coding/codecs/openh264/src/codec/encoder/core/inc',
    '#webrtc/modules/video_coding/codecs/openh264/src/codec/encoder/core/src',
    '#webrtc/modules/video_coding/codecs/openh264/src/codec/encoder/plus/inc',
    '#webrtc/modules/video_coding/codecs/openh264/src/codec/encoder/plus/src',
    '#webrtc/modules/video_coding/codecs/openh264/src/codec/processing/interface/'

    ])
_env.Append(LIBPATH = 'lib')
_env['LIBS'] = ['vpx', 'c', 'rt', 'dl']

totalSources = [

      
      'src/codec/common/inc/WelsThreadLib.h',
      'src/codec/common/inc/copy_mb.h',
      'src/codec/common/inc/cpu.h',
      'src/codec/common/inc/cpu_core.h',
      'src/codec/common/inc/crt_util_safe_x.h',
      'src/codec/common/inc/deblocking_common.h',
      'src/codec/common/inc/expand_pic.h',
      'src/codec/common/inc/golomb_common.h',
      'src/codec/common/inc/intra_pred_common.h',
      'src/codec/common/inc/ls_defines.h',
      'src/codec/common/inc/macros.h',
      'src/codec/common/inc/mc.h',
      'src/codec/common/inc/measure_time.h',
      'src/codec/common/inc/memory_align.h',
      'src/codec/common/inc/sad_common.h',
      'src/codec/common/inc/typedefs.h',
      'src/codec/common/inc/utils.h',
      'src/codec/common/inc/version.h',
      'src/codec/common/inc/welsCodecTrace.h',
      'src/codec/common/inc/wels_common_defs.h',
      'src/codec/common/inc/wels_const_common.h',
      'src/codec/common/src/WelsThreadLib.cpp',
      'src/codec/common/src/common_tables.cpp',
      'src/codec/common/src/copy_mb.cpp',
      'src/codec/common/src/cpu.cpp',
      'src/codec/common/src/crt_util_safe_x.cpp',
      'src/codec/common/src/deblocking_common.cpp',
      'src/codec/common/src/expand_pic.cpp',
      'src/codec/common/src/intra_pred_common.cpp',
      'src/codec/common/src/mc.cpp',
      'src/codec/common/src/memory_align.cpp',
      'src/codec/common/src/sad_common.cpp',
      'src/codec/common/src/utils.cpp',
      'src/codec/common/src/welsCodecTrace.cpp',
      
      'src/codec/common/x86/cpuid.S',
      'src/codec/common/x86/deblock.S',
      'src/codec/common/x86/expand_picture.S',
      'src/codec/common/x86/intra_pred_com.S',
      'src/codec/common/x86/mb_copy.S',
      'src/codec/common/x86/mc_chroma.S',
      'src/codec/common/x86/mc_luma.S',
      'src/codec/common/x86/satd_sad.S',
      'src/codec/common/x86/vaa.S',
      
      
      'src/codec/processing/interface/IWelsVP.h',
      'src/codec/processing/src/adaptivequantization/AdaptiveQuantization.cpp',
      'src/codec/processing/src/adaptivequantization/AdaptiveQuantization.h',
      'src/codec/processing/src/backgrounddetection/BackgroundDetection.cpp',
      'src/codec/processing/src/backgrounddetection/BackgroundDetection.h',
      'src/codec/processing/src/common/WelsFrameWork.cpp',
      'src/codec/processing/src/common/WelsFrameWork.h',
      'src/codec/processing/src/common/WelsFrameWorkEx.cpp',
      'src/codec/processing/src/common/common.h',
      'src/codec/processing/src/common/memory.cpp',
      'src/codec/processing/src/common/memory.h',
      'src/codec/processing/src/common/resource.h',
      'src/codec/processing/src/common/typedef.h',
      'src/codec/processing/src/common/util.h',
      'src/codec/processing/src/complexityanalysis/ComplexityAnalysis.cpp',
      'src/codec/processing/src/complexityanalysis/ComplexityAnalysis.h',
      'src/codec/processing/src/denoise/denoise.cpp',
      'src/codec/processing/src/denoise/denoise.h',
      'src/codec/processing/src/denoise/denoise_filter.cpp',
      'src/codec/processing/src/downsample/downsample.cpp',
      'src/codec/processing/src/downsample/downsample.h',
      'src/codec/processing/src/downsample/downsamplefuncs.cpp',
      'src/codec/processing/src/imagerotate/imagerotate.cpp',
      'src/codec/processing/src/imagerotate/imagerotate.h',
      'src/codec/processing/src/imagerotate/imagerotatefuncs.cpp',
      'src/codec/processing/src/scenechangedetection/SceneChangeDetection.cpp',
      'src/codec/processing/src/scenechangedetection/SceneChangeDetection.h',
      'src/codec/processing/src/scrolldetection/ScrollDetection.cpp',
      'src/codec/processing/src/scrolldetection/ScrollDetection.h',
      'src/codec/processing/src/scrolldetection/ScrollDetectionFuncs.cpp',
      'src/codec/processing/src/scrolldetection/ScrollDetectionFuncs.h',
      'src/codec/processing/src/vaacalc/vaacalcfuncs.cpp',
      'src/codec/processing/src/vaacalc/vaacalculation.cpp',
      'src/codec/processing/src/vaacalc/vaacalculation.h',
      
      
      'src/codec/processing/src/x86/denoisefilter.S',
      'src/codec/processing/src/x86/downsample_bilinear.S',
      'src/codec/processing/src/x86/vaa.S',
      
      'src/codec/encoder/core/inc/as264_common.h',
      'src/codec/encoder/core/inc/au_set.h',
      'src/codec/encoder/core/inc/deblocking.h',
      'src/codec/encoder/core/inc/decode_mb_aux.h',
      'src/codec/encoder/core/inc/dq_map.h',
      'src/codec/encoder/core/inc/encode_mb_aux.h',
      'src/codec/encoder/core/inc/encoder.h',
      'src/codec/encoder/core/inc/encoder_context.h',
      'src/codec/encoder/core/inc/extern.h',
      'src/codec/encoder/core/inc/get_intra_predictor.h',
      'src/codec/encoder/core/inc/mb_cache.h',
      'src/codec/encoder/core/inc/md.h',
      'src/codec/encoder/core/inc/mt_defs.h',
      'src/codec/encoder/core/inc/mv_pred.h',
      'src/codec/encoder/core/inc/nal_encap.h',
      'src/codec/encoder/core/inc/param_svc.h',
      'src/codec/encoder/core/inc/parameter_sets.h',
      'src/codec/encoder/core/inc/picture.h',
      'src/codec/encoder/core/inc/picture_handle.h',
      'src/codec/encoder/core/inc/property.h',
      'src/codec/encoder/core/inc/rc.h',
      'src/codec/encoder/core/inc/ref_list_mgr_svc.h',
      'src/codec/encoder/core/inc/sample.h',
      'src/codec/encoder/core/inc/set_mb_syn_cabac.h',
      'src/codec/encoder/core/inc/set_mb_syn_cavlc.h',
      'src/codec/encoder/core/inc/slice.h',
      'src/codec/encoder/core/inc/slice_multi_threading.h',
      'src/codec/encoder/core/inc/stat.h',
      'src/codec/encoder/core/inc/svc_base_layer_md.h',
      'src/codec/encoder/core/inc/svc_enc_frame.h',
      'src/codec/encoder/core/inc/svc_enc_golomb.h',
      'src/codec/encoder/core/inc/svc_enc_macroblock.h',
      'src/codec/encoder/core/inc/svc_enc_slice_segment.h',
      'src/codec/encoder/core/inc/svc_encode_mb.h',
      'src/codec/encoder/core/inc/svc_encode_slice.h',
      'src/codec/encoder/core/inc/svc_mode_decision.h',
      'src/codec/encoder/core/inc/svc_motion_estimate.h',
      'src/codec/encoder/core/inc/svc_set_mb_syn.h',
      'src/codec/encoder/core/inc/svc_set_mb_syn_cavlc.h',
      'src/codec/encoder/core/inc/vlc_encoder.h',
      'src/codec/encoder/core/inc/wels_common_basis.h',
      'src/codec/encoder/core/inc/wels_const.h',
      'src/codec/encoder/core/inc/wels_func_ptr_def.h',
      'src/codec/encoder/core/inc/wels_preprocess.h',
      'src/codec/encoder/core/inc/wels_transpose_matrix.h',
      'src/codec/encoder/core/src/au_set.cpp',
      'src/codec/encoder/core/src/deblocking.cpp',
      'src/codec/encoder/core/src/decode_mb_aux.cpp',
      'src/codec/encoder/core/src/encode_mb_aux.cpp',
      'src/codec/encoder/core/src/encoder.cpp',
      'src/codec/encoder/core/src/encoder_data_tables.cpp',
      'src/codec/encoder/core/src/encoder_ext.cpp',
      'src/codec/encoder/core/src/get_intra_predictor.cpp',
      'src/codec/encoder/core/src/md.cpp',
      'src/codec/encoder/core/src/mv_pred.cpp',
      'src/codec/encoder/core/src/nal_encap.cpp',
      'src/codec/encoder/core/src/picture_handle.cpp',
      'src/codec/encoder/core/src/property.cpp',
      'src/codec/encoder/core/src/ratectl.cpp',
      'src/codec/encoder/core/src/ref_list_mgr_svc.cpp',
      'src/codec/encoder/core/src/sample.cpp',
      'src/codec/encoder/core/src/set_mb_syn_cabac.cpp',
      'src/codec/encoder/core/src/set_mb_syn_cavlc.cpp',
      'src/codec/encoder/core/src/slice_multi_threading.cpp',
      'src/codec/encoder/core/src/svc_base_layer_md.cpp',
      'src/codec/encoder/core/src/svc_enc_slice_segment.cpp',
      'src/codec/encoder/core/src/svc_encode_mb.cpp',
      'src/codec/encoder/core/src/svc_encode_slice.cpp',
      'src/codec/encoder/core/src/svc_mode_decision.cpp',
      'src/codec/encoder/core/src/svc_motion_estimate.cpp',
      'src/codec/encoder/core/src/svc_set_mb_syn_cabac.cpp',
      'src/codec/encoder/core/src/svc_set_mb_syn_cavlc.cpp',
      'src/codec/encoder/core/src/wels_preprocess.cpp',
      'src/codec/encoder/plus/inc/welsEncoderExt.h',
      'src/codec/encoder/plus/src/welsEncoderExt.cpp',
      # Note: Purposefully excluded: 'src/codec/encoder/plus/src/DllEntry.cpp',
      # This file is not built by the OpenH264 original build files.
      
      
      #'src/codec/encoder/core/x86/coeff.S',
      #'src/codec/encoder/core/x86/dct.S',
      #'src/codec/encoder/core/x86/intra_pred.S',
      #'src/codec/encoder/core/x86/matrix_transpose.S',
      #'src/codec/encoder/core/x86/memzero.S',
      #'src/codec/encoder/core/x86/quant.S',
      #'src/codec/encoder/core/x86/sample_sc.S',
      #'src/codec/encoder/core/x86/score.S'
  ]

print totalSources

_myName='libgsv_codecs_openh264'
objs = totalSources
target = _env.StaticLibrary(_myName + '.a', objs, _LIBFLAGS=' -Wl,-Bsymbolic')
objs.append(target)


Return('target')
